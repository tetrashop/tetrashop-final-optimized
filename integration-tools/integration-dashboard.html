<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>داشبورد ضد چندپارگی - تتراشاپ</title>
    <style>
        body {
            font-family: Tahoma, Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f8f9fa;
        }
        .dashboard {
            max-width: 1200px;
            margin: 0 auto;
        }
        .header {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 30px;
        }
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .metric-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }
        .metric-value {
            font-size: 2rem;
            font-weight: bold;
            margin: 10px 0;
        }
        .component-map {
            background: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        .connection-line {
            stroke: #3498db;
            stroke-width: 2;
        }
        .health-good { color: #27ae60; }
        .health-warning { color: #f39c12; }
        .health-poor { color: #e74c3c; }
    </style>
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
    <div class="dashboard">
        <div class="header">
            <h1>داشبورد ضد چندپارگی تتراشاپ</h1>
            <p>ابزار نظارت و هماهنگی هوشمند بین کامپوننت‌ها</p>
        </div>

        <div class="metrics-grid">
            <div class="metric-card">
                <h3>کامپوننت‌های فعال</h3>
                <div class="metric-value">۶</div>
                <div>سیستم‌های مستقر</div>
            </div>
            <div class="metric-card">
                <h3>ارتباطات</h3>
                <div class="metric-value">۱۲</div>
                <div>اتصال بین کامپوننت‌ها</div>
            </div>
            <div class="metric-card">
                <h3>انسجام</h3>
                <div class="metric-value health-good">۸۵٪</div>
                <div>میزان یکپارچگی</div>
            </div>
            <div class="metric-card">
                <h3>ناسازگاری‌ها</h3>
                <div class="metric-value health-good">۲</div>
                <div>نیاز به تصحیح</div>
            </div>
        </div>

        <div class="component-map">
            <h3>نقشه ارتباطی کامپوننت‌ها</h3>
            <div id="connectionGraph"></div>
        </div>

        <div class="component-map">
            <h3>گزارش فوری اقدامات</h3>
            <div id="actionsList">
                <div style="background: #e8f5e8; padding: 15px; margin: 10px 0; border-radius: 5px; border-right: 4px solid #27ae60;">
                    <strong>✅ سیستم شطرنج:</strong> کاملاً یکپارچه با پلتفرم اصلی
                </div>
                <div style="background: #fff3cd; padding: 15px; margin: 10px 0; border-radius: 5px; border-right: 4px solid #ffc107;">
                    <strong>⚠️ سیستم CMS:</strong> نیاز به بروزرسانی قیمت‌ها در دمو
                </div>
                <div style="background: #e8f5e8; padding: 15px; margin: 10px 0; border-radius: 5px; border-right: 4px solid #27ae60;">
                    <strong>✅ مدیریت پروژه:</strong> سازگار با تمام کامپوننت‌ها
                </div>
            </div>
        </div>
    </div>

    <script>
        // شبیه‌سازی گراف ارتباطات
        const components = [
            { id: 'main', name: 'فروشگاه اصلی', group: 1 },
            { id: 'chess', name: 'سیستم شطرنج', group: 2 },
            { id: 'cms', name: 'سیستم CMS', group: 2 },
            { id: 'project', name: 'مدیریت پروژه', group: 2 },
            { id: 'demo', name: 'سیستم دمو', group: 3 },
            { id: 'backend', name: 'بک‌اند', group: 4 }
        ];

        const links = [
            { source: 'main', target: 'chess', strength: 0.8 },
            { source: 'main', target: 'cms', strength: 0.7 },
            { source: 'main', target: 'project', strength: 0.9 },
            { source: 'chess', target: 'demo', strength: 0.6 },
            { source: 'cms', target: 'demo', strength: 0.5 },
            { source: 'project', target: 'demo', strength: 0.7 },
            { source: 'main', target: 'backend', strength: 0.4 }
        ];

        // ایجاد visualisation ساده
        const svg = d3.select('#connectionGraph')
            .append('svg')
            .attr('width', '100%')
            .attr('height', '400');

        // نمایش ساده ارتباطات
        components.forEach((comp, i) => {
            svg.append('circle')
                .attr('cx', 100 + (i * 150))
                .attr('cy', 200)
                .attr('r', 30)
                .attr('fill', comp.group === 1 ? '#1a2a6c' : 
                              comp.group === 2 ? '#b21f1f' : 
                              comp.group === 3 ? '#fdbb2d' : '#27ae60');
            
            svg.append('text')
                .attr('x', 100 + (i * 150))
                .attr('y', 200)
                .attr('text-anchor', 'middle')
                .attr('fill', 'white')
                .attr('dy', '0.3em')
                .text(comp.name);
        });
    </script>
</body>
</html>
